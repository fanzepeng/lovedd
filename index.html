<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        img {
            width:200px;
        }
        .box {
            float: left;
            border: 1px solid #ccc;
            padding: 5px;
        }

    </style>
    <script src="jquery-1.12.2.js"></script>
    <script src="masonry-docs.min.js"></script>
    <script>

        $(function () {
            var $container = $('#container');
            $container.imagesLoaded(function () {
                $container.masonry({
                    itemSelector: '.box',
                    isAnimated: true
                });
            });


            var json = [
                {src:"images/0.jpg"},
                {src:"images/1.jpg"},
                {src:"images/2.jpg"},
                {src:"images/3.jpg"},
                {src:"images/4.jpg"},
                {src:"images/5.jpg"},
                {src:"images/6.jpg"},
                {src:"images/7.jpg"},
                {src:"images/8.jpg"},
                {src:"images/9.jpg"},
                {src:"images/10.jpg"},
                {src:"images/11.jpg"},
                {src:"images/12.jpg"},
                {src:"images/13.jpg"},
                {src:"images/14.jpg"},
                {src:"images/15.jpg"},
                {src:"images/16.jpg"},
                {src:"images/17.jpg"},
                {src:"images/18.jpg"},
                {src:"images/19.jpg"},
                {src:"images/20.jpg"},
                {src:"images/21.jpg"},
                {src:"images/22.jpg"},
                {src:"images/23.jpg"},
                {src:"images/24.jpg"},
                {src:"images/25.jpg"},
                {src:"images/26.jpg"},
                {src:"images/27.jpg"},
                {src:"images/28.jpg"},
                {src:"images/29.jpg"},
                {src:"images/30.jpg"},
                {src:"images/31.jpg"},
                {src:"images/32.jpg"},
                {src:"images/33.jpg"},
                {src:"images/34.jpg"},
                {src:"images/35.jpg"},
                {src:"images/36.jpg"},
                {src:"images/37.jpg"},
                {src:"images/38.jpg"},
                {src:"images/39.jpg"},
                {src:"images/40.jpg"},
                {src:"images/41.jpg"},
                {src:"images/42.jpg"},
                {src:"images/43.jpg"},
                {src:"images/44.jpg"},
                {src:"images/45.jpg"},
                {src:"images/46.jpg"},
                {src:"images/47.jpg"},
                {src:"images/48.jpg"},
                {src:"images/49.jpg"},
                {src:"images/50.jpg"},
                {src:"images/51.jpg"},
                {src:"images/52.jpg"},
                {src:"images/53.jpg"},
                {src:"images/54.jpg"},
                {src:"images/55.jpg"},
                {src:"images/56.jpg"},
                {src:"images/57.jpg"},
                {src:"images/58.jpg"},
                {src:"images/59.jpg"},
                {src:"images/60.jpg"},
                {src:"images/61.jpg"},
                {src:"images/62.jpg"},
                {src:"images/63.jpg"},
                {src:"images/64.jpg"},
                {src:"images/65.jpg"},
                {src:"images/66.jpg"},
                {src:"images/67.jpg"},
                {src:"images/68.jpg"},
                {src:"images/69.jpg"},
                {src:"images/70.jpg"},
                {src:"images/71.jpg"},
                {src:"images/72.jpg"},
                {src:"images/73.jpg"},
                {src:"images/74.jpg"},
                {src:"images/75.jpg"},
                {src:"images/76.jpg"},
                {src:"images/77.jpg"},
                {src:"images/78.jpg"},
                {src:"images/79.jpg"},
                {src:"images/80.jpg"},
                {src:"images/81.jpg"},
                {src:"images/82.jpg"},
                {src:"images/83.jpg"},
                {src:"images/84.jpg"},
                {src:"images/85.jpg"},
                {src:"images/86.jpg"},
                {src:"images/87.jpg"},
                {src:"images/88.jpg"},
                {src:"images/89.jpg"},
                {src:"images/90.jpg"},
                {src:"images/91.jpg"},
                {src:"images/92.jpg"},
                {src:"images/93.jpg"},
                {src:"images/94.jpg"},
                {src:"images/95.jpg"},
                {src:"images/96.jpg"},
                {src:"images/97.jpg"},
                {src:"images/98.jpg"},
                {src:"images/99.jpg"},
                    {src:"images/100.jpg"},
                    {src:"images/101.jpg"},
                    {src:"images/102.jpg"},
                    {src:"images/103.jpg"},
                    {src:"images/104.jpg"},
                    {src:"images/105.jpg"},
                    {src:"images/106.jpg"},
                    {src:"images/107.jpg"},
                    {src:"images/108.jpg"},
                    {src:"images/109.jpg"},
                    {src:"images/110.jpg"},
                    {src:"images/111.jpg"},
                    {src:"images/112.jpg"},
                    {src:"images/113.jpg"},
                    {src:"images/114.jpg"},
                    {src:"images/115.jpg"},
                    {src:"images/116.jpg"},
                    {src:"images/117.jpg"},
                    {src:"images/118.jpg"},
                    {src:"images/119.jpg"}
                
            ];
            //判断触底，加载更多的图片
            $(window).scroll(function () {
                //当距离底部就剩下500px的时候，加载新图片
                if ($(document).height() - $(this).scrollTop() - $(this).height() < 500) {
                    //创建一个jquery对象
                    var str = "";
                    for (var i = 0; i < json.length; i++) {
                        str += '<div class="box"><img src="' + json[i].src + '" alt=""/></div>';
                    }
                    var $boxes = $(str);
                    $container.append($boxes).masonry("appended", $boxes, true);//追加元素
                    $container.imagesLoaded(function () {
                        $container.masonry();
                    });//加载完图片后，会实现自动重新排列。【这里是重点】
                }
            });

        });


    </script>
</head>
<body>
<div id="container">
    <div class="box"><img src="images/0.jpg" alt=""/></div>
    <div class="box"><img src="images/1.jpg" alt=""></div>
    <div class="box"><img src="images/2.jpg" alt=""></div>
    <div class="box"><img src="images/3.jpg" alt=""></div>
    <div class="box"><img src="images/4.jpg" alt=""></div>
    <div class="box"><img src="images/5.jpg" alt=""></div>
    <div class="box"><img src="images/6.jpg" alt=""></div>
    <div class="box"><img src="images/7.jpg" alt=""></div>
    <div class="box"><img src="images/8.jpg" alt=""></div>
    <div class="box"><img src="images/9.jpg" alt=""></div>
    <div class="box"><img src="images/10.jpg" alt=""></div>
    <div class="box"><img src="images/11.jpg" alt=""></div>
    <div class="box"><img src="images/12.jpg" alt=""></div>
    <div class="box"><img src="images/13.jpg" alt=""></div>
    <div class="box"><img src="images/14.jpg" alt=""></div>
    <div class="box"><img src="images/15.jpg" alt=""></div>
    <div class="box"><img src="images/16.jpg" alt=""></div>
    <div class="box"><img src="images/17.jpg" alt=""></div>
    <div class="box"><img src="images/18.jpg" alt=""></div>
    <div class="box"><img src="images/19.jpg" alt=""></div>
    <div class="box"><img src="images/20.jpg" alt=""></div>
    <div class="box"><img src="images/21.jpg" alt=""></div>
    <div class="box"><img src="images/22.jpg" alt=""></div>
    <div class="box"><img src="images/23.jpg" alt=""></div>
    <div class="box"><img src="images/24.jpg" alt=""></div>
    <div class="box"><img src="images/25.jpg" alt=""></div>
    <div class="box"><img src="images/26.jpg" alt=""></div>
    <div class="box"><img src="images/27.jpg" alt=""></div>
    <div class="box"><img src="images/28.jpg" alt=""></div>
    <div class="box"><img src="images/29.jpg" alt=""></div>
    <div class="box"><img src="images/30.jpg" alt=""></div>
    <div class="box"><img src="images/31.jpg" alt=""></div>
    <div class="box"><img src="images/32.jpg" alt=""></div>
    <div class="box"><img src="images/33.jpg" alt=""></div>
    <div class="box"><img src="images/34.jpg" alt=""></div>
    <div class="box"><img src="images/35.jpg" alt=""></div>
    <div class="box"><img src="images/36.jpg" alt=""></div>
    <div class="box"><img src="images/37.jpg" alt=""></div>
    <div class="box"><img src="images/38.jpg" alt=""></div>
    <div class="box"><img src="images/39.jpg" alt=""></div>
    <div class="box"><img src="images/40.jpg" alt=""></div>
    <div class="box"><img src="images/41.jpg" alt=""></div>
    <div class="box"><img src="images/42.jpg" alt=""></div>
    <div class="box"><img src="images/43.jpg" alt=""></div>
    <div class="box"><img src="images/44.jpg" alt=""></div>
    <div class="box"><img src="images/45.jpg" alt=""></div>
    <div class="box"><img src="images/46.jpg" alt=""></div>
    <div class="box"><img src="images/47.jpg" alt=""></div>
    <div class="box"><img src="images/48.jpg" alt=""></div>
    <div class="box"><img src="images/49.jpg" alt=""></div>
    <div class="box"><img src="images/50.jpg" alt=""></div>
    <div class="box"><img src="images/51.jpg" alt=""></div>
    <div class="box"><img src="images/52.jpg" alt=""></div>
    <div class="box"><img src="images/53.jpg" alt=""></div>
    <div class="box"><img src="images/54.jpg" alt=""></div>
    <div class="box"><img src="images/55.jpg" alt=""></div>
    <div class="box"><img src="images/56.jpg" alt=""></div>
    <div class="box"><img src="images/57.jpg" alt=""></div>
    <div class="box"><img src="images/58.jpg" alt=""></div>
    <div class="box"><img src="images/59.jpg" alt=""></div>
    <div class="box"><img src="images/60.jpg" alt=""></div>
    <div class="box"><img src="images/61.jpg" alt=""></div>
    <div class="box"><img src="images/62.jpg" alt=""></div>
    <div class="box"><img src="images/63.jpg" alt=""></div>
    <div class="box"><img src="images/64.jpg" alt=""></div>
    <div class="box"><img src="images/65.jpg" alt=""></div>
    <div class="box"><img src="images/66.jpg" alt=""></div>
    <div class="box"><img src="images/67.jpg" alt=""></div>
    <div class="box"><img src="images/68.jpg" alt=""></div>
    <div class="box"><img src="images/69.jpg" alt=""></div>
    <div class="box"><img src="images/70.jpg" alt=""></div>
    <div class="box"><img src="images/71.jpg" alt=""></div>
    <div class="box"><img src="images/72.jpg" alt=""></div>
    <div class="box"><img src="images/73.jpg" alt=""></div>
    <div class="box"><img src="images/74.jpg" alt=""></div>
    <div class="box"><img src="images/75.jpg" alt=""></div>
    <div class="box"><img src="images/76.jpg" alt=""></div>
    <div class="box"><img src="images/77.jpg" alt=""></div>
    <div class="box"><img src="images/78.jpg" alt=""></div>
    <div class="box"><img src="images/79.jpg" alt=""></div>
    <div class="box"><img src="images/80.jpg" alt=""></div>
    <div class="box"><img src="images/81.jpg" alt=""></div>
    <div class="box"><img src="images/82.jpg" alt=""></div>
    <div class="box"><img src="images/83.jpg" alt=""></div>
    <div class="box"><img src="images/84.jpg" alt=""></div>
    <div class="box"><img src="images/85.jpg" alt=""></div>
    <div class="box"><img src="images/86.jpg" alt=""></div>
    <div class="box"><img src="images/87.jpg" alt=""></div>
    <div class="box"><img src="images/88.jpg" alt=""></div>
    <div class="box"><img src="images/89.jpg" alt=""></div>
    <div class="box"><img src="images/90.jpg" alt=""></div>
    <div class="box"><img src="images/91.jpg" alt=""></div>
    <div class="box"><img src="images/92.jpg" alt=""></div>
    <div class="box"><img src="images/93.jpg" alt=""></div>
    <div class="box"><img src="images/94.jpg" alt=""></div>
    <div class="box"><img src="images/95.jpg" alt=""></div>
    <div class="box"><img src="images/96.jpg" alt=""></div>
    <div class="box"><img src="images/97.jpg" alt=""></div>
    <div class="box"><img src="images/98.jpg" alt=""></div>
    <div class="box"><img src="images/99.jpg" alt=""></div>
    <div class="box"><img src="images/100.jpg" alt=""></div>
    <div class="box"><img src="images/101.jpg" alt=""></div>
    <div class="box"><img src="images/102.jpg" alt=""></div>
    <div class="box"><img src="images/103.jpg" alt=""></div>
    <div class="box"><img src="images/104.jpg" alt=""></div>
    <div class="box"><img src="images/105.jpg" alt=""></div>
    <div class="box"><img src="images/106.jpg" alt=""></div>
    <div class="box"><img src="images/107.jpg" alt=""></div>
    <div class="box"><img src="images/108.jpg" alt=""></div>
    <div class="box"><img src="images/109.jpg" alt=""></div>
    <div class="box"><img src="images/110.jpg" alt=""></div>
    <div class="box"><img src="images/111.jpg" alt=""></div>
    <div class="box"><img src="images/112.jpg" alt=""></div>
    <div class="box"><img src="images/113.jpg" alt=""></div>
    <div class="box"><img src="images/114.jpg" alt=""></div>
    <div class="box"><img src="images/115.jpg" alt=""></div>
    <div class="box"><img src="images/116.jpg" alt=""></div>
    <div class="box"><img src="images/117.jpg" alt=""></div>
    <div class="box"><img src="images/118.jpg" alt=""></div>
    <div class="box"><img src="images/119.jpg" alt=""></div>
</div>
</body>
</html>
